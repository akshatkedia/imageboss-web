"use strict";/* Copyright Â© 2019 ImageBoss. All rights reserved. */(function(){function a(a,b){return m[a]===void 0?b:m[a]}function b(a,b){var{operation:c,coverMode:d,width:e,height:f,options:g}=b,h="/:operation/:options/";"cover"===c?h="/:operation::cover_mode/:widthx:height/:options/":"width"===c?h="/:operation/:width/:options/":"height"===c&&(h="/:operation/:height/:options/");var i=h.replace(":operation",c||"").replace(":cover_mode",d||"").replace(":width",e||"").replace(":height",f||"").replace(":options",g||"").replace(/\/\//g,"/").replace(/:\//g,"/");return"https://img.imageboss.me"+i+a}function c(a){return!!a.getAttribute("".concat(o.propKey,"-src"))}function d(a){return!!a.getAttribute("".concat(o.propKey,"-bg-src"))}function e(a){return a&&!a.match(/^https?:\/\//)&&(a="".concat(window.location.origin,"/").concat(a)),a}function f(a,b){o.blurEnabled&&(a.style["-webkit-filter"]="blur(".concat(b,"px)"),a.style["-moz-filter"]="blur(".concat(b,"px)"),a.style["-o-filter"]="blur(".concat(b,"px)"),a.style["-ms-filter"]="blur(".concat(b,"px)"),a.style.filter="blur(".concat(b,"px)"))}function g(a,b){c(a)?a.setAttribute("src",b):d(a)&&(a.style.backgroundImage="url('".concat(b,"')"))}function h(a){return a.getBoundingClientRect().top<=window.innerHeight&&0<=a.getBoundingClientRect().bottom&&"none"!==getComputedStyle(a).display}function i(a){return a&&j(a,"loaded")}function j(a,b){return a.getAttribute("".concat(o.propKey,"-").concat(b))}function k(a,b,c){return a.getAttribute("".concat(o.propKey,"-").concat(b),c)}function l(a){Array.from(a).filter(a=>{if(!a.getAttribute)return!1;var b=a.getAttribute("src")||window.getComputedStyle(a).getPropertyValue("background-image"),c=e(a.getAttribute(o.imgPropKey)||a.getAttribute(o.bgPropKey)),d=RegExp(m.authorisedHosts.join("|"));return c&&!i(a)&&c.match(d)}).forEach(a=>{var c=Math.round,i=e(a.getAttribute(o.imgPropKey)||a.getAttribute(o.bgPropKey)),l=a.getAttribute("".concat(o.propKey,"-operation"))||"width",m=a.getAttribute("".concat(o.propKey,"-cover-mode")),n=!!a.getAttribute("".concat(o.propKey,"-low-res")),p=a.getAttribute("width")||a.clientWidth,q=a.getAttribute("height")||a.clientHeight,r=(a.getAttribute("".concat(o.propKey,"-options"))||"").split(",");if(o.devMode)return g(a,i);o.webpEnabled&&o.webpSupport&&r.push("format:webp"),o.dprEnabled&&1<o.dprSupport&&r.push("dpr:2");var s=b(i,{operation:l,coverMode:m,width:p,height:q,options:r.filter(b=>!d(a)&&!b.match(/dpr/)||b).filter(a=>a).join(",")});if(!n)return g(a,s);// low res only down here
if(!j(a,"low-res-loaded")){r.push("quality:50"),r.push("blur:20");var t=b(i,{operation:l,coverMode:m,width:c(.4*p),height:c(.4*q),options:r.filter(a=>!a.match(/dpr/)).filter(a=>a).join(",")});g(a,t),d(a)&&(a.style.backgroundSize="".concat(p,"px")),f(a,10),a.style.transition="filter 1s",k(a,"low-res-loaded",!0)}if(h(a)&&!j(a,"loading")){k(a,"loading",!0);var u=new Image;u.src=s,u.addEventListener("load",function(){k(a,"loaded",!0),f(a,0),g(a,s)})}})}var m=window.ImageBoss,n="https://".concat("img.imageboss.me"),o={propKey:"imageboss",imgPropKey:"imageboss-src",bgPropKey:"imageboss-bg-src",dprSupport:window.devicePixelRatio,devMode:a("devMode",!1),dprEnabled:a("dprEnabled",!0),webpEnabled:a("webpEnabled",!0),blurEnabled:a("blurEnabled",!0)};(function(a,b){if(!b)return a(!1);var c=new Image;c.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",c.onload=a.bind(this,!0),c.onerror=a.bind(this,!1)})(function(a){o.webpSupport=a;var b="[".concat(o.imgPropKey,"],[").concat(o.bgPropKey,"]");l(document.querySelectorAll(b)),new MutationObserver(function(a){for(var b of a)"childList"===b.type&&l(b.addedNodes)}).observe(document.querySelector("body"),{attributes:!0,childList:!0,subtree:!0}),document.addEventListener("scroll",()=>l(document.querySelectorAll(b))),window.addEventListener("resize",()=>l(document.querySelectorAll(b))),window.addEventListener("orientationchange",()=>l(document.querySelectorAll(b)))},o.webpEnabled)})();

