"use strict";/* Copyright Â© 2019 ImageBoss. All rights reserved. */(function(){function a(a,b){return n[a]===void 0?b:n[a]}function b(a,b){var{operation:c,coverMode:d,width:e,height:f,options:g}=b,h="/:operation/:options/";"cover"===c?h="/:operation::cover_mode/:widthx:height/:options/":"width"===c?h="/:operation/:width/:options/":"height"===c&&(h="/:operation/:height/:options/");var i=h.replace(":operation",c||"").replace(":cover_mode",d||"").replace(":width",e||"").replace(":height",f||"").replace(":options",g||"").replace(/\/\//g,"/").replace(/:\//g,"/");return"https://img.imageboss.me"+i+a}function c(a){return!!a.getAttribute("".concat(p.propKey,"-src"))}function d(a){return!!a.getAttribute("".concat(p.propKey,"-bg-src"))}function e(a){return a&&!a.match(/^https?:\/\//)&&(a="".concat(window.location.origin,"/").concat(a.replace(/^\//,""))),a}function f(a,b){p.animationEnabled&&(a.style.opacity="".concat(b))}function g(a,b){c(a)?a.setAttribute("src",b):d(a)&&(a.style.backgroundImage="url('".concat(b,"')"))}function h(a){return a.getBoundingClientRect().top<=window.innerHeight+300&&0<=a.getBoundingClientRect().bottom+300&&"none"!==getComputedStyle(a).display}function i(a){return a&&j(a,"loaded")}function j(a,b){return a.getAttribute("".concat(p.propKey,"-").concat(b))}function k(a,b,c){return a.setAttribute("".concat(p.propKey,"-").concat(b),c)}function l(a,b){var c=new Image;c.src=a,c.addEventListener("load",b)}function m(a){Array.from(a).filter(a=>{if(!a.getAttribute)return!1;var b=e(a.getAttribute(p.imgPropKey)||a.getAttribute(p.bgPropKey)),c=RegExp(n.authorisedHosts.join("|"));return b&&!i(a)&&b.match(c)}).forEach(a=>{var c=Math.round,i=e(a.getAttribute(p.imgPropKey)||a.getAttribute(p.bgPropKey)),m=j(a,"operation")||"width",n=j(a,"cover-mode"),o=!!j(a,"low-res"),q=j(a,"width")||a.getAttribute("width")||a.clientWidth,r=j(a,"height")||a.getAttribute("height")||a.clientHeight,s=(a.getAttribute("".concat(p.propKey,"-options"))||"").split(",");if(p.devMode)return k(a,"loaded",!0),g(a,i);p.webpEnabled&&p.webpSupport&&s.push("format:webp"),p.dprEnabled&&1<p.dprSupport&&s.push("dpr:2");var t=b(i,{operation:m,coverMode:n,width:q,height:r,options:s.filter(b=>!d(a)&&!b.match(/dpr/)||b).filter(a=>a).join(",")});if(f(a,.1),a.style.transition="opacity 1.5s",d(a)&&(a.style.backgroundSize="100%"),!o&&h(a))return g(a,t),void l(t,function(){k(a,"loaded",!0),f(a,1)});if(o){if(!j(a,"low-res-loaded")){s.push("quality:01");var u=b(i,{operation:m,coverMode:n,width:c(.4*q),height:c(.4*r),options:s.filter(a=>!a.match(/dpr/)).filter(a=>a).join(",")});g(a,u),k(a,"low-res-loaded",!0)}h(a)&&!j(a,"loading")&&(k(a,"loading",!0),l(t,function(){k(a,"loaded",!0),g(a,t),f(a,1)}))}})}var n=window.ImageBoss,o="https://".concat("img.imageboss.me"),p={propKey:"imageboss",imgPropKey:"imageboss-src",bgPropKey:"imageboss-bg-src",dprSupport:window.devicePixelRatio,devMode:a("devMode",!1),dprEnabled:a("dprEnabled",!0),webpEnabled:a("webpEnabled",!0),animationEnabled:a("animationEnabled",!0)};(function(a,b){if(!b)return a(!1);var c=new Image;c.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",c.onload=a.bind(this,!0),c.onerror=a.bind(this,!1)})(function(a){function b(a){a&&(a.length&&Array.prototype.forEach.call(a,function(a){a.attributes&&(a.attributes[p.imgPropKey]||a.attributes[p.bgPropKey])&&!j(a,"loaded")&&m([a]),b(a.childNodes)}),b(a.childNodes))}p.webpSupport=a;var c="[".concat(p.imgPropKey,"],[").concat(p.bgPropKey,"]"),d=()=>m(document.querySelectorAll(c));// in case the user do not add the script at the bottom
"loading"!==document.readyState&&d(),window.addEventListener("DOMContentLoaded",d),window.addEventListener("DOMNodeInserted",a=>b(a.target)),window.addEventListener("resize",d),window.addEventListener("orientationchange",d),document.addEventListener("scroll",d)},p.webpEnabled)})(window);

