"use strict";/* Copyright Â© 2019 ImageBoss. All rights reserved. */(function(){function a(a,b){return h[a]===void 0?b:h[a]}function b(a,b){var{operation:c,coverMode:d,width:e,height:f,options:g}=b,h="/:operation/:options/";"cover"===c?h="/:operation::cover_mode/:widthx:height/:options/":"width"===c?h="/:operation/:width/:options/":"height"===c&&(h="/:operation/:height/:options/");var i=h.replace(":operation",c||"").replace(":cover_mode",d||"").replace(":width",e||"").replace(":height",f||"").replace(":options",g||"").replace(/\/\//g,"/").replace(/:\//g,"/");return"https://img.imageboss.me"+i+a}function c(a){return!!a.getAttribute("".concat(j.propKey,"-src"))}function d(a){return!!a.getAttribute("".concat(j.propKey,"-bg-src"))}function e(a,b){j.blurEnabled&&(a.style["-webkit-filter"]="blur(".concat(b,"px)"),a.style["-moz-filter"]="blur(".concat(b,"px)"),a.style["-o-filter"]="blur(".concat(b,"px)"),a.style["-ms-filter"]="blur(".concat(b,"px)"),a.style.filter="blur(".concat(b,"px)"))}function f(a,b){c(a)?a.setAttribute("src",b):d(a)&&(a.style.backgroundImage="url('".concat(b,"')"))}function g(a){Array.from(a).filter(a=>{if(!a.getAttribute)return!1;var b=a.getAttribute(j.imgPropKey)||a.getAttribute(j.bgPropKey),c=RegExp(h.authorisedHosts.join("|"));return b&&!b.match(/^https?:\/\//)&&(b="".concat(window.location.origin,"/").concat(b)),b&&b.match(c)&&!b.match("img.imageboss.me")}).forEach(a=>{var c=Math.round,g=a.getAttribute(j.imgPropKey)||a.getAttribute(j.bgPropKey),h=a.getAttribute("".concat(j.propKey,"-operation"))||"width",i=a.getAttribute("".concat(j.propKey,"-cover-mode")),k=a.getAttribute("width")||a.clientWidth,l=a.getAttribute("height")||a.clientHeight,m=(a.getAttribute("".concat(j.propKey,"-options"))||"").split(",");if(j.devMode)return f(a,g);j.webpEnabled&&j.webpSupport&&m.push("format:webp"),j.dprEnabled&&1<j.dprSupport&&m.push("dpr:2");var n=b(g,{operation:h,coverMode:i,width:k,height:l,options:m.filter(b=>!d(a)&&!b.match(/dpr/)||b).filter(a=>a).join(",")});if(j.lowResolutionFirstEnabled){m.push("quality:50"),m.push("blur:20");var o=b(g,{operation:h,coverMode:i,width:c(.4*k),height:c(.4*l),options:m.filter(a=>!a.match(/dpr/)).filter(a=>a).join(",")});f(a,o),d(a)&&(a.style.backgroundSize="".concat(k,"px")),a.style.transition="filter 1s",e(a,10);var p=new Image;p.src=n,p.onload=function(){e(a,0),f(a,n)}}else f(a,n)})}var h=window.ImageBoss,i="https://".concat("img.imageboss.me"),j={propKey:"data-imageboss",imgPropKey:"data-imageboss-src",bgPropKey:"data-imageboss-bg-src",dprSupport:window.devicePixelRatio,devMode:a("devMode",!1),dprEnabled:a("dprEnabled",!0),webpEnabled:a("webpEnabled",!0),blurEnabled:a("blurEnabled",!0),lowResolutionFirstEnabled:a("lowResolutionFirstEnabled",!0)};(function(a,b){if(!b)return a(!1);var c=new Image;c.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",c.onload=a.bind(this,!0),c.onerror=a.bind(this,!1)})(function(a){j.webpSupport=a,g(document.querySelectorAll("[".concat(j.imgPropKey,"],[").concat(j.bgPropKey,"]"))),new MutationObserver(function(a){for(var b of a)"childList"===b.type&&g(b.addedNodes)}).observe(document.querySelector("body"),{attributes:!0,childList:!0,subtree:!0})},j.webpEnabled)})();

